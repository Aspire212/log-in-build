(this["webpackJsonplog-in-out"]=this["webpackJsonplog-in-out"]||[]).push([[0],{183:function(e,t,n){},185:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),a=n(70),s=n.n(a),r=(n(82),n(10)),o=n(76),d=n(2),l=n(77),j=n(34),u=(n(183),n(1)),h=function(e){var t=e.signIn,n=e.authKey,i=e.setAuthKey,c=j.a().shape({email:j.b().matches(/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/,"invalid email"),password:j.b().min(4)}),a=function(e,n){t(i,{clientId:1,email:e,password:n})};return Object(u.jsxs)("div",{children:["no logged",Object(u.jsxs)("div",{children:["no-token"===n&&Object(u.jsx)("div",{className:"error",children:Object(u.jsx)("p",{children:"user is not registered, please try again"})}),Object(u.jsx)(l.a,{initialValues:{email:"",password:""},onSubmit:function(e){a(e.email,e.password),setTimeout((function(){e.email="",e.password=""}),1e3)},validationSchema:c,children:function(e){var t=e.values,n=e.errors,i=e.touched,c=e.handleChange,s=e.handleBlur,r=e.isValid,o=(e.handleSubmit,e.dirty);return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{name:"email",type:"email",onChange:c,onBlur:s,value:t.email,placeholder:"Enter your email"}),Object(u.jsx)("div",{className:"error",children:i.email&&n.email&&Object(u.jsx)("p",{children:n.email})})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{name:"password",type:"password",onChange:c,onBlur:s,value:t.password,placeholder:"Enter your password"}),Object(u.jsx)("div",{className:"error",children:i.password&&n.password&&Object(u.jsx)("p",{children:n.password})})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",disabled:!r||!o,onClick:function(){return a(t.email,t.password)},children:"Sign In"})})]})}})]})]})};function b(e,t){fetch("https://tager.dev.ozitag.com/api/auth/user",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){t.data?e("".concat(t.data.tokenType," ").concat(t.data.accessToken)):e("no-token")})).catch((function(e){return console.log(e)}))}function p(e){e("")}var O={id:0,email:"",name:""},m=function(e){var t=e.signOut,n=e.setAuthKey,c=e.authKey,a=Object(i.useState)(O),s=Object(r.a)(a,2),o=s[0],d=s[1];return Object(i.useEffect)((function(){!function(e,t){fetch("https://tager.dev.ozitag.com/api/tager/user/profile",{method:"GET",headers:{Accept:"application/json",Authorization:e}}).then((function(e){return e.json()})).then((function(e){return t(e.data)})).catch((function(e){return console.log(e)}))}(c,d)}),[c]),Object(u.jsx)("div",{children:o.name&&Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:["id: ",o.id]}),Object(u.jsxs)("div",{children:["email: ",o.email]}),Object(u.jsxs)("div",{children:["name: ",o.name]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{onClick:function(){return t(n)},children:"Sign out"})})]})})};n(185);var x=function(){var e=Object(i.useState)(""),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(u.jsx)(o.a,{children:Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)(d.d,{children:[Object(u.jsx)(d.b,{exact:!0,path:"/",children:n.length>10?Object(u.jsx)(d.a,{to:"/LogIn"}):Object(u.jsx)(h,{signIn:b,authKey:n,setAuthKey:c})}),Object(u.jsx)(d.b,{path:"/LogIn",children:n.length<10?Object(u.jsx)(d.a,{to:"/"}):Object(u.jsx)(m,{signOut:p,setAuthKey:c,authKey:n})})]})})})};s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(x,{})}),document.getElementById("root"))},82:function(e,t,n){}},[[191,1,2]]]);
//# sourceMappingURL=main.e590513c.chunk.js.map